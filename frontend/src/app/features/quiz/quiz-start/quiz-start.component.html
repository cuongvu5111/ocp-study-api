<div class="quiz-start">
    <header class="page-header">
        <h1>Quiz Practice</h1>
        <p>Luy·ªán t·∫≠p v·ªõi c√¢u h·ªèi t∆∞∆°ng t·ª± ƒë·ªÅ thi th·ª±c t·∫ø</p>
    </header>

    <!-- Quiz Modes -->
    <div class="mode-grid">
        <div class="mode-card" (click)="selectMode('quick')">
            <span class="mode-icon">‚ö°</span>
            <h3>Quick Quiz</h3>
            <p>10 c√¢u ng·∫´u nhi√™n, kh√¥ng gi·ªõi h·∫°n th·ªùi gian</p>
        </div>

        <div class="mode-card" (click)="selectMode('topic')">
            <span class="mode-icon">üìö</span>
            <h3>Quiz theo Topic</h3>
            <p>Ch·ªçn topic b·∫°n mu·ªën luy·ªán t·∫≠p</p>
        </div>

        <div class="mode-card mode-card--premium" (click)="selectMode('mock')">
            <span class="mode-icon">üéØ</span>
            <h3>Mock Exam</h3>
            <p>50 c√¢u, 90 ph√∫t - gi·ªëng ƒë·ªÅ thi th·∫≠t</p>
            <span class="premium-badge">ƒê·ªÅ xu·∫•t</span>
        </div>
    </div>

    <!-- Recent Scores -->
    <section class="recent-section">
        <h2 class="section-title">L·ªãch s·ª≠ g·∫ßn ƒë√¢y</h2>
        <div class="history-list">
            @for (item of history(); track item.date) {
            <div class="history-item">
                <div class="history-info">
                    <span class="history-type">{{ item.type }}</span>
                    <span class="history-date">{{ item.date }}</span>
                </div>
                <div class="history-score" [class.pass]="item.score >= 68">
                    {{ item.score }}%
                </div>
            </div>
            }
        </div>
    </section>

    <!-- Topic Selection Modal -->
    @if (showTopicModal()) {
    <div class="modal-overlay" (click)="closeTopicModal()">
        <div class="modal" (click)="$event.stopPropagation()">
            <div class="modal__header">
                <h2>Ch·ªçn Topic</h2>
                <button class="btn btn--ghost btn--icon" (click)="closeTopicModal()">
                    <span class="material-icons-outlined">close</span>
                </button>
            </div>

            <div class="modal__body">
                @if (loadingTopics()) {
                <div class="loading-state">
                    <div class="spinner"></div>
                    <p>ƒêang t·∫£i topics...</p>
                </div>
                } @else if (topics().length === 0) {
                <div class="empty-state">
                    <p>Kh√¥ng c√≥ topic n√†o</p>
                </div>
                } @else {
                <div class="topic-grid">
                    @for (topic of topics(); track topic.id) {
                    <div class="topic-card" (click)="selectTopic(topic)">
                        <h3>{{ topic.name }}</h3>
                        @if (topic.description) {
                        <p>{{ topic.description }}</p>
                        }
                        @if (topic.subtopicCount) {
                        <span class="topic-count">{{ topic.subtopicCount }} subtopics</span>
                        }
                    </div>
                    }
                </div>
                }
            </div>
        </div>
    </div>
    }
</div>